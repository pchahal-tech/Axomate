<UserControl x:Class="Axomate.UI.Views.AdminPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d">
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TabControl Grid.Row="0">
            <!-- ========================= OVERVIEW ========================= -->
            <TabItem Header="Overview">
                <Grid Margin="12">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <GroupBox Header="Database Info" Margin="0 0 0 12">
                        <StackPanel Margin="12" >
                            <TextBlock Text="Path:" FontWeight="SemiBold"/>
                            <TextBlock Text="{Binding DbPath}" TextWrapping="Wrap" Margin="0,4,0,8"/>

                            <WrapPanel>
                                <StackPanel Margin="0,0,24,0">
                                    <TextBlock Text="Size (MB)" FontWeight="SemiBold"/>
                                    <TextBlock Text="{Binding DbSize}"/>
                                </StackPanel>
                                <StackPanel Margin="0,0,24,0">
                                    <TextBlock Text="Last Backup" FontWeight="SemiBold"/>
                                    <TextBlock Text="{Binding LastBackup}"/>
                                </StackPanel>
                                <StackPanel>
                                    <TextBlock Text="Integrity" FontWeight="SemiBold"/>
                                    <TextBlock Text="{Binding IntegrityStatus}"/>
                                </StackPanel>
                            </WrapPanel>
                        </StackPanel>
                    </GroupBox>

                    <GroupBox Header="Quick Actions" Grid.Row="1">
                        <WrapPanel Margin="12" ItemHeight="36" ItemWidth="220">
                            <Button Content="Run Integrity Check"
                                Command="{Binding RunIntegrityCheckCommand}" Margin="0,0,12,12"/>
                            <Button Content="Compact (VACUUM)"
                                Command="{Binding VacuumCommand}" Margin="0,0,12,12"/>
                            <Button Content="Create Backup Now"
                                Command="{Binding BackupCommand}" Margin="0,0,12,12"/>
                            <Button Content="Open Data Folder"
                                Command="{Binding OpenDataFolderCommand}" Margin="0,0,12,12"/>
                            <Button Content="View Startup Log"
                                Command="{Binding ViewLogCommand}" Margin="0,0,12,12"/>
                        </WrapPanel>
                    </GroupBox>
                </Grid>
            </TabItem>

            <!-- ========================= DATABASE ========================= -->
            <TabItem Header="Database">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="12" >
                        <GroupBox Header="Backups" Margin="0 0 0 12">
                            <StackPanel Margin="12" >
                                <TextBlock Text="Last Backup:"/>
                                <TextBlock Text="{Binding LastBackup}" FontWeight="SemiBold" Margin="0,4,0,8"/>
                                <WrapPanel>
                                    <Button Content="Create Backup Now" Command="{Binding BackupCommand}" Margin="0,0,12,0"/>
                                    <Button Content="Open Backups Folder" Command="{Binding OpenBackupsFolderCommand}"/>
                                </WrapPanel>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="Maintenance" Margin="0 0 0 12">
                            <StackPanel Margin="12" >
                                <TextBlock Text="Run integrity check to detect any corruption. VACUUM compacts the database to reclaim free space." TextWrapping="Wrap" Margin="0,0,0,8"/>
                                <WrapPanel>
                                    <Button Content="Run Integrity Check" Command="{Binding RunIntegrityCheckCommand}" Margin="0,0,12,0"/>
                                    <Button Content="Compact Database (VACUUM)" Command="{Binding VacuumCommand}"/>
                                </WrapPanel>
                                <TextBlock Text="Status:" FontWeight="SemiBold" Margin="0,12,0,2"/>
                                <TextBlock Text="{Binding IntegrityStatus}"/>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="Logs">
                            <StackPanel Margin="12">
                                <TextBlock Text="startup.log records DB size and health on each app start." TextWrapping="Wrap" Margin="0,0,0,8"/>
                                <WrapPanel>
                                    <Button Content="View Startup Log" Command="{Binding ViewLogCommand}" Margin="0,0,12,0"/>
                                    <Button Content="Open Data Folder" Command="{Binding OpenDataFolderCommand}"/>
                                </WrapPanel>
                            </StackPanel>
                        </GroupBox>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- ========================= COMPANY INFO ========================= -->
            <TabItem Header="Company">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="12" >
                        <GroupBox Header="Profile" Margin="0,0,0,12">
                            <Grid Margin="12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="160"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Text="Name" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"/>
                                <TextBox Text="{Binding CompanyName, UpdateSourceTrigger=PropertyChanged}" Grid.Row="0" Grid.Column="1" Margin="6,2"/>

                                <TextBlock Text="Tagline" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center"/>
                                <TextBox Text="{Binding CompanyTagline}" Grid.Row="1" Grid.Column="1" Margin="6,2"/>

                                <TextBlock Text="Logo File" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center"/>
                                <DockPanel Grid.Row="2" Grid.Column="1" LastChildFill="True" Margin="6,2">
                                    <TextBox Text="{Binding CompanyLogoFileName}" Margin="0,0,6,0"/>
                                    <Button Content="Browse…" Command="{Binding BrowseLogoCommand}" />
                                </DockPanel>
                            </Grid>
                        </GroupBox>

                        <GroupBox Header="Contact" Margin="0,0,0,12">
                            <Grid Margin="12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="160"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Text="Address Line 1" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"/>
                                <TextBox Text="{Binding CompanyAddressLine1}" Grid.Row="0" Grid.Column="1" Margin="6,2"/>

                                <TextBlock Text="Address Line 2" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center"/>
                                <TextBox Text="{Binding CompanyAddressLine2}" Grid.Row="1" Grid.Column="1" Margin="6,2"/>

                                <TextBlock Text="Phone 1" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center"/>
                                <TextBox Text="{Binding CompanyPhone1}" Grid.Row="2" Grid.Column="1" Margin="6,2"/>

                                <TextBlock Text="Phone 2" Grid.Row="3" Grid.Column="0" VerticalAlignment="Center"/>
                                <TextBox Text="{Binding CompanyPhone2}" Grid.Row="3" Grid.Column="1" Margin="6,2"/>

                                <TextBlock Text="Email" Grid.Row="4" Grid.Column="0" VerticalAlignment="Center"/>
                                <TextBox Text="{Binding CompanyEmail}" Grid.Row="4" Grid.Column="1" Margin="6,2"/>

                                <TextBlock Text="Website" Grid.Row="5" Grid.Column="0" VerticalAlignment="Center"/>
                                <TextBox Text="{Binding CompanyWebsite}" Grid.Row="5" Grid.Column="1" Margin="6,2"/>
                            </Grid>
                        </GroupBox>

                        <GroupBox Header="Tax / Registration" Margin="0,0,0,12">
                            <Grid Margin="12">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="160"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <TextBlock Text="GST Number" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"/>
                                <TextBox Text="{Binding CompanyGstNumber}" Grid.Row="0" Grid.Column="1" Margin="6,2"/>
                            </Grid>
                        </GroupBox>

                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button Content="Reset" Command="{Binding ResetCompanyCommand}" Margin="0,0,8,0"/>
                            <Button Content="Save" Command="{Binding SaveCompanyCommand}" />
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,12,0,0">
            <Button Content="Close" Width="110" IsCancel="True"/>
        </StackPanel>
    </Grid>
</UserControl>
